{"version":3,"file":"blockEditor.js","mappings":"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","sources":["webpack://pysyslink-editor/./media/Block.ts","webpack://pysyslink-editor/./media/BlockInteractionManager.ts","webpack://pysyslink-editor/./media/Link.ts","webpack://pysyslink-editor/./media/LinkInteractionManager.ts","webpack://pysyslink-editor/webpack/bootstrap","webpack://pysyslink-editor/webpack/runtime/define property getters","webpack://pysyslink-editor/webpack/runtime/hasOwnProperty shorthand","webpack://pysyslink-editor/webpack/runtime/make namespace object","webpack://pysyslink-editor/./media/blockEditor.ts"],"sourcesContent":["export class Block {\n    id: string;\n    label: string;\n    private x: number;\n    private y: number;\n    private element: HTMLElement;\n    _isSelected: boolean = false;\n\n    inputPorts: number;\n    outputPorts: number;\n\n\n    constructor(id: string, label: string, x: number, y: number, inputPorts: number, outputPorts: number, onClick: (block: Block, e: MouseEvent) => void, onMouseDown: (block: Block, e: MouseEvent) => void) {\n        this.id = id;\n        this.label = label;\n        this.x = x;\n        this.y = y;\n        this.inputPorts = inputPorts;\n        this.outputPorts = outputPorts;\n\n        // Create the DOM element for the block\n        this.element = this.createElement(onClick, onMouseDown);\n    }\n\n    public setPosition(x: number, y: number): void {\n        this.x = x;\n        this.y = y;\n        this.element.style.left = `${x}px`;\n        this.element.style.top = `${y}px`;\n        \n    }\n\n    public getState(): { type: string; id: string; x: number; y: number}[] {\n        return [{\n            type: 'move',\n            id: this.id,\n            x: this.x,\n            y: this.y\n        }];\n    }\n\n    public parseStateFromJson(blockData: { x: number; y: number; label: string }): void {\n        this.setPosition(blockData.x, blockData.y);\n        this.label = blockData.label;\n    }\n\n    public getPosition(): { x: number; y: number } {\n        return { x: this.x, y: this.y };\n    }\n\n    public select(): void {\n        this._isSelected = true;\n        this.element.classList.add('selected');\n    }\n\n    public unselect(): void {\n        this._isSelected = false;\n        this.element.classList.remove('selected');\n    }\n\n    public isSelected(): boolean {\n        return this._isSelected;\n    }\n\n    public toggleSelect(): void {\n        this._isSelected = !this._isSelected;\n        if (this._isSelected) {\n            this.select();\n        } else {\n            this.unselect();\n        }\n    }\n\n    private createElement(onClick: (block: Block, e: MouseEvent) => void, onMouseDown: (block: Block, e: MouseEvent) => void): HTMLElement {\n        const blockElement = document.createElement('div');\n        blockElement.classList.add('block');\n        blockElement.style.left = `${this.x}px`;\n        blockElement.style.top = `${this.y}px`;\n        \n        const label = document.createElement('div');\n        label.textContent = this.label;\n        blockElement.appendChild(label);\n\n        for (let i = 0; i < this.inputPorts; i++) {\n            const inputPort = document.createElement('div');\n            inputPort.classList.add('input-port');\n            inputPort.textContent = `In ${i + 1}`;\n            blockElement.appendChild(inputPort);\n        }\n    \n        // Add output ports\n        for (let i = 0; i < this.outputPorts; i++) {\n            const outputPort = document.createElement('div');\n            outputPort.classList.add('output-port');\n            outputPort.textContent = `Out ${i + 1}`;\n            blockElement.appendChild(outputPort);\n        }\n\n        // Attach event listeners\n        blockElement.addEventListener('click', (e: MouseEvent) => onClick(this, e));\n        blockElement.addEventListener('mousedown', (e: MouseEvent) => onMouseDown(this, e));\n\n        return blockElement;\n    }\n\n\n    public move(deltaX: number, deltaY: number): void {\n        this.setPosition(this.x + deltaX, this.y + deltaY);\n    }\n\n    getElement(): HTMLElement {\n        return this.element;\n    }\n\n    public addElementToCanvas(canvas: HTMLElement): void {\n        canvas.appendChild(this.element);\n    }\n\n    public getPortPosition(portIndex: number, portType: \"input\" | \"output\"): { x: number; y: number } {\n        const portSpacing = 20; // Spacing between ports\n        const portOffset = portIndex * portSpacing;\n    \n        // Get the block's position relative to the canvas\n        const blockX = this.x;\n        const blockY = this.y;\n    \n        // Adjust for the port type\n        if (portType === \"input\") {\n            return { x: blockX, y: blockY + portOffset };\n        } else {\n            return { x: blockX + this.element.offsetWidth, y: blockY + portOffset };\n        }\n    }\n}","import { Block } from './Block';\n\nexport class BlockInteractionManager {\n    public blocks: Block[] = [];\n    private dragStartX = 0;\n    private dragStartY = 0;\n\n    private dragThreshold = 5; // Minimum distance to detect a drag\n    private isDragging = false;\n\n    private vscode: any;\n\n    private getZoomLevelReal: () => number;\n    private updateLinks: (blockInteractionManager: BlockInteractionManager) => void;\n\n    constructor(vscode: any, getZoomLevelReal: () => number, updateLinks: (blockInteractionManager: BlockInteractionManager) => void) {\n        this.vscode = vscode;\n        this.getZoomLevelReal = getZoomLevelReal;\n        this.updateLinks = updateLinks;\n    }\n\n    public createBlock(id: string, label: string, x: number, y: number, inputPorts: number, outputPorts: number): void {\n        const block = new Block(id, label, x, y, inputPorts, outputPorts, this.onClick, this.onMouseDown);\n        this.blocks.push(block);\n    }\n    \n    \n    public unselectAll(): void {\n        this.blocks.forEach(block => block.unselect());\n    }\n    \n    public getSelectedBlocks(): Block[] {\n        return this.blocks.filter(block => block.isSelected());\n    }\n\n\n    public onClick = (block: Block, e: MouseEvent): void => {\n        this.vscode.postMessage({ type: 'print', text: `Block clicked: ${block.label}` });\n    };\n\n    public onMouseDown = (block: Block, e: MouseEvent): void => {\n        this.vscode.postMessage({ type: 'print', text: 'Block mouse down'});\n        if (e.button !== 1) {\n            this.vscode.postMessage({ type: 'print', text: `Mouse down on block: ${block.label}` });\n            if (!block.isSelected()) {\n                if (e.shiftKey) {\n                    // Toggle selection if Shift is pressed\n                    block.toggleSelect();\n                } else {\n                    // Clear selection and select only this block\n                    this.unselectAll();\n                    block.select();\n                }\n            }\n\n            // Store the initial mouse position\n            this.dragStartX = e.clientX;\n            this.dragStartY = e.clientY;\n            this.isDragging = false; // Reset dragging state\n        \n            // Add a temporary mousemove listener to detect drag threshold\n            const onMouseMoveThreshold = (moveEvent: MouseEvent) => {\n                const deltaX = Math.abs(moveEvent.clientX - this.dragStartX);\n                const deltaY = Math.abs(moveEvent.clientY - this.dragStartY);\n        \n                if (deltaX > this.dragThreshold || deltaY > this.dragThreshold) {\n                    // Exceeded drag threshold, start dragging\n                    this.isDragging = true;\n                    document.removeEventListener('mousemove', onMouseMoveThreshold);\n        \n                    // Start dragging selected blocks\n                    if (!block.isSelected()) {\n                        // If the block is not already selected, add it to the selection\n                        block.select();\n                    }\n                    document.addEventListener('mousemove', this.onMouseMove);\n                    document.addEventListener('mouseup', this.onMouseUp);\n                }\n            };\n        \n            document.addEventListener('mousemove', onMouseMoveThreshold);\n        \n            // Handle mouseup to detect a simple click\n            const onMouseUpThreshold = () => {\n                document.removeEventListener('mousemove', onMouseMoveThreshold);\n                document.removeEventListener('mouseup', onMouseUpThreshold);\n        \n                if (!this.isDragging) {\n                    this.vscode.postMessage({ type: 'print', text: `As simple click on: ${block.label}` });\n\n                    // If no drag occurred, treat it as a simple click\n                    if (e.shiftKey) {\n                        // Toggle selection if Shift is pressed\n                        block.toggleSelect();\n                    } else {\n                        // Clear selection and select only this block\n                        this.unselectAll();\n                        block.select();\n                    }\n                }\n            };\n        \n            document.addEventListener('mouseup', onMouseUpThreshold);\n        }\n    };\n\n    public onMouseUp = (): void => {\n        this.vscode.postMessage({ type: 'print', text: `Mouse up` });\n\n        if (this.isDragging) {\n            this.isDragging = false;\n            const stateMessages = this.getSelectedBlocks().flatMap(block => block.getState());\n\n            stateMessages.forEach(message => {\n                this.vscode.postMessage({ type: 'print', text: message});\n            }); \n\n            \n            this.vscode.postMessage({ type: 'moveBatch', updates: stateMessages });\n\n        }\n\n        document.removeEventListener('mousemove', this.onMouseMove);\n        document.removeEventListener('mouseup', this.onMouseUp);\n    };\n\n    public onMouseMove = (e: MouseEvent): void => {\n        const scaledDeltaX = (e.clientX - this.dragStartX) / this.getZoomLevelReal();\n        const scaledDeltaY = (e.clientY - this.dragStartY) / this.getZoomLevelReal();\n        \n        if (this.isDragging) {\n            this.getSelectedBlocks().forEach(block => {\n                block.move(scaledDeltaX, scaledDeltaY);\n            });\n\n            this.dragStartX = e.clientX;\n            this.dragStartY = e.clientY;\n\n\n        }\n\n        this.updateLinks(this);\n\n    };\n\n}\n","import { Block } from './Block';\n\nexport class Link {\n    sourceId: string;\n    sourcePort: number;\n    targetId: string;\n    targetPort: number;\n    intermediateNodes: { x: number; y: number }[];\n    private polylineElement: SVGPolylineElement;\n    private nodeElements: SVGCircleElement[] = [];\n    private _isSelected: boolean = false;\n\n    constructor(\n        sourceId: string,\n        sourcePort: number,\n        targetId: string,\n        targetPort: number,\n        intermediateNodes: { x: number; y: number }[] = []\n    ) {\n        this.sourceId = sourceId;\n        this.sourcePort = sourcePort;\n        this.targetId = targetId;\n        this.targetPort = targetPort;\n        this.intermediateNodes = intermediateNodes;\n\n        // Create the SVG polyline element\n        this.polylineElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"polyline\");\n        this.polylineElement.classList.add('link-line');\n        this.polylineElement.setAttribute(\"stroke\", \"#007acc\");\n        this.polylineElement.setAttribute(\"stroke-width\", \"2\");\n        this.polylineElement.setAttribute(\"fill\", \"none\");\n\n        // Add event listeners for interaction\n        this.polylineElement.addEventListener('click', this.onClick);\n        this.polylineElement.addEventListener('dblclick', this.onDoubleClick);\n    }\n\n    updatePosition(blocks: Block[]): void {\n        const sourceBlock = blocks.find(block => block.id === this.sourceId);\n        const targetBlock = blocks.find(block => block.id === this.targetId);\n\n        if (sourceBlock && targetBlock) {\n            const sourcePos = sourceBlock.getPortPosition(this.sourcePort, \"output\");\n            const targetPos = targetBlock.getPortPosition(this.targetPort, \"input\");\n\n            // Combine source, intermediate nodes, and target into a single points string\n            const points = [\n                `${sourcePos.x},${sourcePos.y}`,\n                ...this.intermediateNodes\n                    .filter(node => node && typeof node.x === 'number' && typeof node.y === 'number') // Ensure valid nodes\n                    .map(node => `${node.x},${node.y}`),\n                `${targetPos.x},${targetPos.y}`\n            ].join(\" \");\n    \n            this.polylineElement.setAttribute(\"points\", points);\n    \n            // Update intermediate node positions\n            this.nodeElements.forEach((nodeElement, index) => {\n                const node = this.intermediateNodes[index];\n                if (node) {\n                    nodeElement.setAttribute('cx', `${node.x}`);\n                    nodeElement.setAttribute('cy', `${node.y}`);\n                }\n            });\n        }\n    }\n\n    addToSvg(svg: SVGSVGElement): void {\n        svg.appendChild(this.polylineElement);\n\n        // this.nodeElements.forEach(nodeElement => svg.removeChild(nodeElement));\n        // this.nodeElements = [];\n\n        // Add intermediate node elements\n        this.intermediateNodes.forEach(node => {\n            const nodeElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n            nodeElement.classList.add('link-node');\n            nodeElement.setAttribute(\"cx\", `${node.x}`);\n            nodeElement.setAttribute(\"cy\", `${node.y}`);\n            nodeElement.addEventListener('mousedown', this.onNodeMouseDown(node));\n            svg.appendChild(nodeElement);\n            this.nodeElements.push(nodeElement);\n        });\n    }\n\n    removeFromSvg(svg: SVGSVGElement): void {\n        svg.removeChild(this.polylineElement);\n    }\n\n    private onClick = (e: MouseEvent): void => {\n        this.toggleSelect();\n    };\n\n    private onDoubleClick = (e: MouseEvent): void => {\n        const rect = this.polylineElement.getBoundingClientRect();\n        const newNode = { x: e.clientX - rect.left, y: e.clientY - rect.top };\n        this.intermediateNodes.push(newNode);\n        this.updatePosition([]);\n    };\n\n    private onNodeMouseDown = (node: { x: number; y: number }) => (e: MouseEvent): void => {\n        const onMouseMove = (moveEvent: MouseEvent) => {\n            node.x = moveEvent.clientX;\n            node.y = moveEvent.clientY;\n            this.updatePosition([]);\n        };\n\n        const onMouseUp = () => {\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        };\n\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    };\n\n    public select() {\n        this._isSelected = true;\n        this.polylineElement.classList.add('selected');\n    }\n\n    public unselect(): void {\n        this._isSelected = false;\n        this.polylineElement.classList.remove('selected');\n    }\n\n    public isSelected(): boolean {\n        return this._isSelected;\n    }\n\n    public toggleSelect(): void {\n        this._isSelected = !this._isSelected;\n        if (this._isSelected) {\n            this.select();\n        } else {\n            this.unselect();\n        }\n    }\n\n    public getBoundingBox(): {top: number, bottom: number, right: number, left: number} {\n        const points = [\n            ...this.intermediateNodes,\n            { x: this.polylineElement.getBBox().x, y: this.polylineElement.getBBox().y }\n        ];\n    \n        // Calculate the bounding box\n        const left = Math.min(...points.map(point => point.x));\n        const right = Math.max(...points.map(point => point.x));\n        const top = Math.min(...points.map(point => point.y));\n        const bottom = Math.max(...points.map(point => point.y));\n    \n        return { top, bottom, right, left };\n    }\n}\n","import { BlockInteractionManager } from './BlockInteractionManager';\nimport { Link } from './Link';\n\nexport class LinkInteractionManager {\n    public links: Link[] = [];\n    public linksSvg: SVGSVGElement;\n\n    private canvas: HTMLElement;\n    private vscode: any;\n\n    constructor (vscode: any, canvas: HTMLElement, linksSvg: SVGSVGElement) {\n        this.vscode = vscode;\n        this.canvas = canvas;\n        this.linksSvg = linksSvg;\n    }\n\n    public createLink(sourceId: string, sourcePort: number, targetId: string, targetPort: number, intermediateNodes: { x: number; y: number }[], blockInteractionManager: BlockInteractionManager): void {\n        const link = new Link(sourceId, sourcePort, targetId, targetPort, intermediateNodes);\n        this.links.push(link);\n        this.vscode.postMessage({ type: 'addLink', sourceId: link.sourceId, sourcePort: link.sourcePort, targetId: link.targetId, targetPort: link.targetPort, intermediateNodes: link.intermediateNodes });\n        link.addToSvg(this.linksSvg);\n        this.updateLinks(blockInteractionManager);\n    }\n    \n    public updateLinks = (blockInteractionManager: BlockInteractionManager): void => {\n        this.linksSvg = document.querySelector('.links') as SVGSVGElement;\n        if (!this.linksSvg) {\n            this.linksSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n            this.linksSvg.classList.add('links');\n        }\n        \n        this.linksSvg.style.width = `${this.canvas.offsetWidth}px`;\n        this.linksSvg.style.height = `${this.canvas.offsetHeight}px`;\n        this.linksSvg.style.transform = this.canvas.style.transform; // Match the canvas transform (e.g., scale)\n\n\n        this.links.forEach(link => link.addToSvg(this.linksSvg));\n        this.links.forEach(link => link.updatePosition(blockInteractionManager.blocks));\n        this.canvas.appendChild(this.linksSvg);\n    };\n\n    public unselectAll(): void {\n        this.links.forEach(link => {\n            link.unselect();\n        });\n    }\n\n    public deleteLink(link: Link): void {\n        link.removeFromSvg(this.linksSvg);\n        const index = this.links.indexOf(link);\n        if (index !== -1) {\n            this.links.splice(index, 1);\n        }\n    }\n\n    public renderLinks(\n            linksData: { sourceId: string; sourcePort: number; targetId: string; targetPort: number; intermediateNodes: { x: number; y: number }[] }[], \n            blockInteractionManager: BlockInteractionManager): SVGSVGElement {\n        \n        this.vscode.postMessage({ type: 'print', text: `Render links` });\n\n        if (!this.linksSvg) {\n            this.linksSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n            this.linksSvg.classList.add('links');\n            this.linksSvg.style.position = 'absolute';\n            this.linksSvg.style.top = '0';\n            this.linksSvg.style.left = '0';\n            this.linksSvg.style.width = '100%';\n            this.linksSvg.style.height = '100%';\n            this.linksSvg.style.pointerEvents = 'all';\n        }\n\n        // Clear existing links\n        this.links.forEach(link => link.removeFromSvg(this.linksSvg));\n        this.links.length = 0;\n    \n        // Create and render new links\n        linksData.forEach(linkData => {\n            const link = new Link(\n                linkData.sourceId,\n                linkData.sourcePort,\n                linkData.targetId,\n                linkData.targetPort,\n                linkData.intermediateNodes\n            );\n            this.links.push(link);\n            link.addToSvg(this.linksSvg);\n            link.updatePosition(blockInteractionManager.blocks);\n        });\n\n        return this.linksSvg;\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Link } from './Link';\r\nimport { Block } from './Block';\r\nimport { BlockInteractionManager } from './BlockInteractionManager';\r\nimport { LinkInteractionManager } from './LinkInteractionManager';\r\n\r\n\r\ndeclare const acquireVsCodeApi: () => any;\r\nconst vscode = acquireVsCodeApi();\r\n\r\n\r\n(function () {\r\n    const canvas = document.querySelector('.canvas') as HTMLElement;\r\n    const zoomContainer = document.querySelector('.zoom-container') as HTMLElement;\r\n    const topControls = document.querySelector('.top-controls') as HTMLElement;\r\n    const canvasContainer = document.querySelector('.canvas-container') as HTMLElement;\r\n\r\n\r\n    let dragStartX = 0;\r\n    let dragStartY = 0;\r\n\r\n\r\n    let selectionBox: HTMLElement | null = null;\r\n\r\n    let zoomLevel = 2; // Default zoom level\r\n    const zoomStep = 0.1; // Step for zooming in/out\r\n    const minZoom = 1; // Minimum zoom level\r\n    const maxZoom = 4; // Maximum zoom level\r\n\r\n\r\n    let isPanning = false;\r\n    let panStartX = 0;\r\n    let panStartY = 0;\r\n\r\n    let canvasHeigh = 4000;\r\n    let canvasWidth = 8000;\r\n\r\n    let linkInteractionManager = new LinkInteractionManager(vscode, canvas, document.querySelector('.links') as SVGSVGElement);\r\n    let blockInteractionManager = new BlockInteractionManager(vscode, getZoomLevelReal, linkInteractionManager.updateLinks);\r\n\r\n    function getZoomLevelReal(): number {\r\n        return zoomLevel/2;\r\n    }\r\n\r\n    \r\n\r\n    function onMouseDownInCanvas(e: MouseEvent): void {\r\n        vscode.postMessage({ type: 'print', text: 'mouse down in canvas'});\r\n        vscode.postMessage({ type: 'print', text: `e button ${e.button}`});\r\n        if (e.button !== 1) {\r\n            vscode.postMessage({ type: 'print', text: `e target ${e.target}`});\r\n            if (e.target !== canvas) {\r\n                return; // Ignore clicks on child elements\r\n            }\r\n            vscode.postMessage({ type: 'print', text: 'starting box selection'});\r\n            startBoxSelection(e);\r\n        }\r\n    }\r\n\r\n    function onMouseUp(): void {\r\n        vscode.postMessage({ type: 'print', text: `Mouse up` });\r\n\r\n        if (selectionBox) {\r\n            // End box selection\r\n            canvas.removeChild(selectionBox);\r\n            selectionBox = null;\r\n        }\r\n\r\n        document.removeEventListener('mousemove', onMouseMove);\r\n        document.removeEventListener('mouseup', onMouseUp);\r\n    }\r\n\r\n    function onMouseMove(e: MouseEvent): void {        \r\n        linkInteractionManager.updateLinks(blockInteractionManager);\r\n\r\n        if (selectionBox) {\r\n            // Update selection box size\r\n            const canvasRect = canvas.getBoundingClientRect();\r\n\r\n            const adjustedX = (e.clientX - canvasRect.left) / getZoomLevelReal();\r\n            const adjustedY = (e.clientY - canvasRect.top) / getZoomLevelReal();\r\n\r\n            const scaledWidth = (adjustedX - dragStartX);\r\n            const scaledHeight = (adjustedY - dragStartY);\r\n\r\n            selectionBox.style.left = `${Math.min(dragStartX, adjustedX)}px`;\r\n            selectionBox.style.top = `${Math.min(dragStartY, adjustedY)}px`;\r\n            selectionBox.style.width = `${Math.abs(scaledWidth)}px`;\r\n            selectionBox.style.height = `${Math.abs(scaledHeight)}px`;\r\n    \r\n            // Update selected blocks based on the selection box\r\n            updateSelectionBox();\r\n        }\r\n    }\r\n\r\n\r\n    function startBoxSelection(e: MouseEvent): void {\r\n        blockInteractionManager.unselectAll();\r\n        linkInteractionManager.unselectAll();\r\n    \r\n        vscode.postMessage({ type: 'print', text: `Start box selection at ${e.clientX}, ${e.clientY}` });\r\n    \r\n        // Get the canvas's bounding rectangle\r\n        const canvasRect = canvas.getBoundingClientRect();\r\n    \r\n        // Adjust mouse coordinates to be relative to the canvas\r\n        const adjustedX = (e.clientX - canvasRect.left) / getZoomLevelReal();\r\n        const adjustedY = (e.clientY - canvasRect.top) / getZoomLevelReal();\r\n    \r\n        selectionBox = document.createElement('div');\r\n        selectionBox.className = 'selection-box';\r\n        canvas.appendChild(selectionBox);\r\n    \r\n        dragStartX = adjustedX;\r\n        dragStartY = adjustedY;\r\n    \r\n        selectionBox.style.left = `${dragStartX}px`;\r\n        selectionBox.style.top = `${dragStartY}px`;\r\n    \r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n    }\r\n\r\n    function updateSelectionBox(): void {\r\n        const boxRect = selectionBox!.getBoundingClientRect();\r\n\r\n        blockInteractionManager.blocks.forEach(block => {\r\n            const blockEl = block.getElement();\r\n            const blockRect = blockEl.getBoundingClientRect();\r\n\r\n            if (\r\n                blockRect.left < boxRect.right &&\r\n                blockRect.right > boxRect.left &&\r\n                blockRect.top < boxRect.bottom &&\r\n                blockRect.bottom > boxRect.top\r\n            ) {\r\n                block.select();\r\n            } else {\r\n                block.unselect();\r\n            }\r\n        });\r\n        \r\n        linkInteractionManager.links.forEach(link => {\r\n            const blockRect = link.getBoundingBox();\r\n\r\n            if (\r\n                blockRect.left < boxRect.right &&\r\n                blockRect.right > boxRect.left &&\r\n                blockRect.top < boxRect.bottom &&\r\n                blockRect.bottom > boxRect.top\r\n            ) {\r\n                link.select();\r\n            } else {\r\n                link.unselect();\r\n            }\r\n        });\r\n    }\r\n\r\n    function createRandomLink(): void {\r\n        if (blockInteractionManager.blocks.length < 2) {\r\n            vscode.postMessage({ type: 'print', text: 'Not enough blocks to create a link.' });\r\n            return;\r\n        }\r\n    \r\n        // Randomly select two different blocks\r\n        const sourceIndex = Math.floor(Math.random() * blockInteractionManager.blocks.length);\r\n        let targetIndex = Math.floor(Math.random() * blockInteractionManager.blocks.length);\r\n    \r\n        // Ensure the source and target are not the same\r\n        while (targetIndex === sourceIndex) {\r\n            targetIndex = Math.floor(Math.random() * blockInteractionManager.blocks.length);\r\n        }\r\n    \r\n        const sourceBlock = blockInteractionManager.blocks[sourceIndex];\r\n        const targetBlock = blockInteractionManager.blocks[targetIndex];\r\n    \r\n        // Create a link between the two blocks\r\n        linkInteractionManager.createLink(sourceBlock.id, 0, targetBlock.id, 0, [], blockInteractionManager);\r\n    \r\n        vscode.postMessage({ type: 'print', text: `Created link between ${sourceBlock.label} and ${targetBlock.label}` });\r\n    }\r\n\r\n    function renderHTML(json: {\r\n        blocks?: {\r\n            id: string;\r\n            label: string;\r\n            x: number;\r\n            y: number;\r\n            inputPorts: number;\r\n            outputPorts: number;\r\n        }[];\r\n        links?: {\r\n            sourceId: string;\r\n            sourcePort: number;\r\n            targetId: string;\r\n            targetPort: number;\r\n            intermediateNodes: {\r\n                x: number;\r\n                y: number;\r\n            }[];\r\n        }[];\r\n    }): void {\r\n        vscode.postMessage({ type: 'print', text: `Render html` });\r\n        vscode.postMessage({ type: 'print', text: `Rendering ${blockInteractionManager.blocks.length} blocks` });\r\n        canvas.innerHTML = ''; // Clear canvas\r\n        blockInteractionManager.blocks.forEach(block => block.addElementToCanvas(canvas));\r\n\r\n        canvas.addEventListener('mousedown', onMouseDownInCanvas);\r\n\r\n        topControls.innerHTML = '';\r\n        // Add button\r\n        const btn = document.createElement('button');\r\n        btn.textContent = 'Add Block';\r\n        btn.addEventListener('click', () => vscode.postMessage({ type: 'addBlock' }));\r\n        topControls.appendChild(btn);\r\n\r\n        // Add button to create a link\r\n        const btnCreateLink = document.createElement('button');\r\n        btnCreateLink.textContent = 'Create Link';\r\n        btnCreateLink.addEventListener('click', createRandomLink);\r\n        topControls.appendChild(btnCreateLink);\r\n\r\n        const btnZoomIn = document.createElement('button');\r\n        btnZoomIn.textContent = 'Zoom In';\r\n        const btnZoomOut = document.createElement('button');\r\n        btnZoomOut.textContent = 'Zoom Out';\r\n        const btnResetZoom = document.createElement('button');\r\n        btnResetZoom.textContent = 'Reset Zoom';\r\n\r\n        btnZoomIn.addEventListener('click', () => setZoom(zoomLevel + zoomStep));\r\n        btnZoomOut.addEventListener('click', () => setZoom(zoomLevel - zoomStep));\r\n        btnResetZoom.addEventListener('click', () => setZoom(2));\r\n\r\n        topControls.appendChild(btnZoomIn);\r\n        topControls.appendChild(btnZoomOut);\r\n        topControls.appendChild(btnResetZoom);\r\n\r\n        zoomContainer.addEventListener('wheel', handleMouseWheelZoom);\r\n        canvasContainer.addEventListener('mousedown', onMouseDownForPanning);\r\n\r\n        \r\n\r\n        linkInteractionManager.updateLinks(blockInteractionManager);\r\n\r\n        centerCanvas();\r\n\r\n        setZoom(zoomLevel);\r\n\r\n        let svgElement = linkInteractionManager.renderLinks((json.links || []).map(link => ({\r\n            sourceId: link.sourceId,\r\n            targetId: link.targetId,\r\n            sourcePort: link.sourcePort, \r\n            targetPort: link.targetPort, \r\n            intermediateNodes: link.intermediateNodes \r\n        })), blockInteractionManager);\r\n\r\n        canvasContainer.appendChild(svgElement);\r\n        linkInteractionManager.updateLinks(blockInteractionManager);\r\n        \r\n\r\n    }\r\n\r\n    \r\n\r\n    function centerCanvas(): void {\r\n        // Scroll to the center of the canvas\r\n        // canvasContainer.scrollLeft = (canvas.scrollWidth - canvasContainer.clientWidth) / 2;\r\n        // canvasContainer.scrollTop = (canvas.scrollHeight - canvasContainer.clientHeight) / 2;\r\n    }\r\n\r\n    function updateWebView(jsonText: string): void {\r\n        vscode.postMessage({ type: 'print', text: `Update blocks` });\r\n        let json: { blocks?: { id: string; label: string; x: number; y: number; inputPorts: number; outputPorts: number}[]; links?: { sourceId: string; sourcePort: number; targetId: string; targetPort: number; intermediateNodes: { x: number; y: number }[] }[] };\r\n        try {\r\n            json = JSON.parse(jsonText || '{}');\r\n        } catch {\r\n            canvas.textContent = 'Invalid JSON';\r\n            return;\r\n        }\r\n\r\n        json.blocks?.forEach(blockData => {\r\n            blockInteractionManager.blocks.find(b => b.id === blockData.id)?.move(blockData.x, blockData.y);\r\n            var block = blockInteractionManager.blocks.find(b => b.id === blockData.id);\r\n            if (block) {\r\n                block.parseStateFromJson(blockData);\r\n            } else {\r\n                vscode.postMessage({ type: 'print', text: `Block ID does not exist, creating block: ${blockData.id}` });\r\n                blockInteractionManager.createBlock(blockData.id, blockData.label, blockData.x, blockData.y, blockData.inputPorts, blockData.outputPorts);\r\n            }\r\n        });\r\n\r\n\r\n        renderHTML(json);\r\n    }\r\n\r\n\r\n    function setZoom(level: number): void {\r\n    \r\n        // Clamp the zoom level between minZoom and maxZoom\r\n        zoomLevel = Math.min(maxZoom, Math.max(minZoom, level));\r\n        zoomContainer.style.transform = `scale(${zoomLevel})`;\r\n\r\n        // Dynamically adjust the canvas size based on the zoom level\r\n        const scaledWidth = Math.min(canvasWidth/2 * zoomLevel, canvasWidth/2); \r\n        const scaledHeight = Math.min(canvasHeigh/2 * zoomLevel, canvasHeigh/2);\r\n    \r\n        zoomContainer.style.width = `${scaledWidth}px`;\r\n        zoomContainer.style.height = `${scaledHeight}px`;\r\n\r\n        linkInteractionManager.updateLinks(blockInteractionManager); // Update the links to match the new zoom level\r\n        vscode.postMessage({ type: 'print', text: `Zoom level: ${zoomLevel}` });\r\n    }\r\n\r\n    function handleMouseWheelZoom(e: WheelEvent): void {\r\n        e.preventDefault(); // Prevent default scrolling behavior\r\n\r\n        // Adjust zoom level based on scroll direction\r\n        if (e.deltaY < 0) {\r\n            setZoom(zoomLevel + zoomStep); // Zoom in\r\n        } else if (e.deltaY > 0) {\r\n            setZoom(zoomLevel - zoomStep); // Zoom out\r\n        }\r\n    }\r\n\r\n    function onMouseDownForPanning(e: MouseEvent): void {\r\n        if (e.button === 1) { // Middle mouse button\r\n            e.preventDefault(); // Prevent default middle mouse behavior (e.g., auto-scroll)\r\n            isPanning = true;\r\n            canvasContainer.classList.add('panning'); // Add the class\r\n\r\n            // Store the initial mouse position\r\n            panStartX = e.clientX;\r\n            panStartY = e.clientY;\r\n    \r\n            // Add event listeners for mousemove and mouseup\r\n            document.addEventListener('mousemove', onMouseMoveForPanning);\r\n            document.addEventListener('mouseup', onMouseUpForPanning);\r\n        }\r\n    }\r\n\r\n    function onMouseMoveForPanning(e: MouseEvent): void {\r\n        if (!isPanning) { return; }\r\n    \r\n        // Calculate the distance moved\r\n        const deltaX = e.clientX - panStartX;\r\n        const deltaY = e.clientY - panStartY;\r\n    \r\n        // Adjust the scroll position of the canvasContainer\r\n        canvasContainer.scrollLeft -= deltaX;\r\n        canvasContainer.scrollTop -= deltaY;\r\n    \r\n        // Update the starting position for the next movement\r\n        panStartX = e.clientX;\r\n        panStartY = e.clientY;\r\n\r\n        linkInteractionManager.updateLinks(blockInteractionManager);\r\n    }\r\n    \r\n    function onMouseUpForPanning(e: MouseEvent): void {\r\n        if (e.button === 1) { // Middle mouse button\r\n            isPanning = false;\r\n            canvasContainer.classList.remove('panning'); // Remove the class\r\n\r\n            // Remove the event listeners\r\n            document.removeEventListener('mousemove', onMouseMoveForPanning);\r\n            document.removeEventListener('mouseup', onMouseUpForPanning);\r\n        }\r\n    }\r\n\r\n\r\n    // Listen for messages from extension\r\n    window.addEventListener('message', (e: MessageEvent) => {\r\n        if (e.data.type === 'update') {\r\n            updateWebView(e.data.text);\r\n            vscode.setState({ text: e.data.text });\r\n        }\r\n    });\r\n\r\n    // Restore state if reloaded\r\n    const state = vscode.getState();\r\n    if (state) {\r\n        updateWebView(state.text);\r\n    }\r\n})();"],"names":[],"sourceRoot":""}