{"version":3,"file":"blockEditor.js","mappings":"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","sources":["webpack://pysyslink-editor/./media/Block.ts","webpack://pysyslink-editor/./media/BlockInteractionManager.ts","webpack://pysyslink-editor/./media/Link.ts","webpack://pysyslink-editor/./media/LinkInteractionManager.ts","webpack://pysyslink-editor/webpack/bootstrap","webpack://pysyslink-editor/webpack/runtime/define property getters","webpack://pysyslink-editor/webpack/runtime/hasOwnProperty shorthand","webpack://pysyslink-editor/webpack/runtime/make namespace object","webpack://pysyslink-editor/./media/blockEditor.ts"],"sourcesContent":["export class Block {\n    id: string;\n    label: string;\n    private x: number;\n    private y: number;\n    private element: HTMLElement;\n    _isSelected: boolean = false;\n\n    inputPorts: number;\n    outputPorts: number;\n\n\n    constructor(id: string, label: string, x: number, y: number, inputPorts: number, outputPorts: number, onClick: (block: Block, e: MouseEvent) => void, onMouseDown: (block: Block, e: MouseEvent) => void) {\n        this.id = id;\n        this.label = label;\n        this.x = x;\n        this.y = y;\n        this.inputPorts = inputPorts;\n        this.outputPorts = outputPorts;\n\n        // Create the DOM element for the block\n        this.element = this.createElement(onClick, onMouseDown);\n    }\n\n    public setPosition(x: number, y: number): void {\n        this.x = x;\n        this.y = y;\n        this.element.style.left = `${x}px`;\n        this.element.style.top = `${y}px`;\n        \n    }\n\n    public getState(): { type: string; id: string; x: number; y: number}[] {\n        return [{\n            type: 'move',\n            id: this.id,\n            x: this.x,\n            y: this.y\n        }];\n    }\n\n    public parseStateFromJson(blockData: { x: number; y: number; label: string }): void {\n        this.setPosition(blockData.x, blockData.y);\n        this.label = blockData.label;\n    }\n\n    public getPosition(): { x: number; y: number } {\n        return { x: this.x, y: this.y };\n    }\n\n    public select(): void {\n        this._isSelected = true;\n        this.element.classList.add('selected');\n    }\n\n    public unselect(): void {\n        this._isSelected = false;\n        this.element.classList.remove('selected');\n    }\n\n    public isSelected(): boolean {\n        return this._isSelected;\n    }\n\n    public toggleSelect(): void {\n        this._isSelected = !this._isSelected;\n        if (this._isSelected) {\n            this.select();\n        } else {\n            this.unselect();\n        }\n    }\n\n    private createElement(onClick: (block: Block, e: MouseEvent) => void, onMouseDown: (block: Block, e: MouseEvent) => void): HTMLElement {\n        const blockElement = document.createElement('div');\n        blockElement.classList.add('block');\n        blockElement.style.left = `${this.x}px`;\n        blockElement.style.top = `${this.y}px`;\n        \n        const label = document.createElement('div');\n        label.textContent = this.label;\n        blockElement.appendChild(label);\n\n        for (let i = 0; i < this.inputPorts; i++) {\n            const inputPort = document.createElement('div');\n            inputPort.classList.add('input-port');\n            inputPort.textContent = `In ${i + 1}`;\n            blockElement.appendChild(inputPort);\n        }\n    \n        // Add output ports\n        for (let i = 0; i < this.outputPorts; i++) {\n            const outputPort = document.createElement('div');\n            outputPort.classList.add('output-port');\n            outputPort.textContent = `Out ${i + 1}`;\n            blockElement.appendChild(outputPort);\n        }\n\n        // Attach event listeners\n        blockElement.addEventListener('click', (e: MouseEvent) => onClick(this, e));\n        blockElement.addEventListener('mousedown', (e: MouseEvent) => onMouseDown(this, e));\n\n        return blockElement;\n    }\n\n\n    public move(deltaX: number, deltaY: number): void {\n        this.setPosition(this.x + deltaX, this.y + deltaY);\n    }\n\n    getElement(): HTMLElement {\n        return this.element;\n    }\n\n    public addElementToCanvas(canvas: HTMLElement): void {\n        canvas.appendChild(this.element);\n    }\n\n    public getPortPosition(portIndex: number, portType: \"input\" | \"output\"): { x: number; y: number } {\n        const portSpacing = 20; // Spacing between ports\n        const portOffset = portIndex * portSpacing;\n    \n        // Get the block's position relative to the canvas\n        const blockX = this.x;\n        const blockY = this.y;\n    \n        // Adjust for the port type\n        if (portType === \"input\") {\n            return { x: blockX, y: blockY + portOffset };\n        } else {\n            return { x: blockX + this.element.offsetWidth, y: blockY + portOffset };\n        }\n    }\n}","import { Block } from './Block';\n\nexport class BlockInteractionManager {\n    public blocks: Block[] = [];\n    private dragStartX = 0;\n    private dragStartY = 0;\n\n    private dragThreshold = 5; // Minimum distance to detect a drag\n    private isDragging = false;\n\n    private vscode: any;\n\n    private getZoomLevelReal: () => number;\n    private updateLinks: (blockInteractionManager: BlockInteractionManager) => void;\n\n    constructor(vscode: any, getZoomLevelReal: () => number, updateLinks: (blockInteractionManager: BlockInteractionManager) => void) {\n        this.vscode = vscode;\n        this.getZoomLevelReal = getZoomLevelReal;\n        this.updateLinks = updateLinks;\n    }\n\n    public createBlock(id: string, label: string, x: number, y: number, inputPorts: number, outputPorts: number): void {\n        const block = new Block(id, label, x, y, inputPorts, outputPorts, this.onClick, this.onMouseDown);\n        this.blocks.push(block);\n    }\n    \n    \n    public unselectAll(): void {\n        this.blocks.forEach(block => block.unselect());\n    }\n    \n    public getSelectedBlocks(): Block[] {\n        return this.blocks.filter(block => block.isSelected());\n    }\n\n\n    public onClick = (block: Block, e: MouseEvent): void => {\n        this.vscode.postMessage({ type: 'print', text: `Block clicked: ${block.label}` });\n    };\n\n    public onMouseDown = (block: Block, e: MouseEvent): void => {\n        this.vscode.postMessage({ type: 'print', text: 'Block mouse down'});\n        if (e.button !== 1) {\n            this.vscode.postMessage({ type: 'print', text: `Mouse down on block: ${block.label}` });\n            if (!block.isSelected()) {\n                if (e.shiftKey) {\n                    // Toggle selection if Shift is pressed\n                    block.toggleSelect();\n                } else {\n                    // Clear selection and select only this block\n                    this.unselectAll();\n                    block.select();\n                }\n            }\n\n            // Store the initial mouse position\n            this.dragStartX = e.clientX;\n            this.dragStartY = e.clientY;\n            this.isDragging = false; // Reset dragging state\n        \n            // Add a temporary mousemove listener to detect drag threshold\n            const onMouseMoveThreshold = (moveEvent: MouseEvent) => {\n                const deltaX = Math.abs(moveEvent.clientX - this.dragStartX);\n                const deltaY = Math.abs(moveEvent.clientY - this.dragStartY);\n        \n                if (deltaX > this.dragThreshold || deltaY > this.dragThreshold) {\n                    // Exceeded drag threshold, start dragging\n                    this.isDragging = true;\n                    document.removeEventListener('mousemove', onMouseMoveThreshold);\n        \n                    // Start dragging selected blocks\n                    if (!block.isSelected()) {\n                        // If the block is not already selected, add it to the selection\n                        block.select();\n                    }\n                    document.addEventListener('mousemove', this.onMouseMove);\n                    document.addEventListener('mouseup', this.onMouseUp);\n                }\n            };\n        \n            document.addEventListener('mousemove', onMouseMoveThreshold);\n        \n            // Handle mouseup to detect a simple click\n            const onMouseUpThreshold = () => {\n                document.removeEventListener('mousemove', onMouseMoveThreshold);\n                document.removeEventListener('mouseup', onMouseUpThreshold);\n        \n                if (!this.isDragging) {\n                    this.vscode.postMessage({ type: 'print', text: `As simple click on: ${block.label}` });\n\n                    // If no drag occurred, treat it as a simple click\n                    if (e.shiftKey) {\n                        // Toggle selection if Shift is pressed\n                        block.toggleSelect();\n                    } else {\n                        // Clear selection and select only this block\n                        this.unselectAll();\n                        block.select();\n                    }\n                }\n            };\n        \n            document.addEventListener('mouseup', onMouseUpThreshold);\n        }\n    };\n\n    public onMouseUp = (): void => {\n        this.vscode.postMessage({ type: 'print', text: `Mouse up` });\n\n        if (this.isDragging) {\n            this.isDragging = false;\n            const stateMessages = this.getSelectedBlocks().flatMap(block => block.getState());\n\n            stateMessages.forEach(message => {\n                this.vscode.postMessage({ type: 'print', text: message});\n            }); \n\n            \n            this.vscode.postMessage({ type: 'moveBatch', updates: stateMessages });\n\n        }\n\n        document.removeEventListener('mousemove', this.onMouseMove);\n        document.removeEventListener('mouseup', this.onMouseUp);\n    };\n\n    public onMouseMove = (e: MouseEvent): void => {\n        const scaledDeltaX = (e.clientX - this.dragStartX) / this.getZoomLevelReal();\n        const scaledDeltaY = (e.clientY - this.dragStartY) / this.getZoomLevelReal();\n        \n        if (this.isDragging) {\n            this.getSelectedBlocks().forEach(block => {\n                block.move(scaledDeltaX, scaledDeltaY);\n            });\n\n            this.dragStartX = e.clientX;\n            this.dragStartY = e.clientY;\n\n\n        }\n\n        this.updateLinks(this);\n\n    };\n\n}\n","import { debug } from 'console';\nimport { Block } from './Block';\n\nexport class LinkNode {\n    id: string;\n    x: number; \n    y: number;\n    nodeElement: SVGCircleElement | undefined;\n    isSelected: boolean = false;\n    isHighlighted: boolean = false;\n\n    private moveCallbacks: { (x: number, y: number) : void; }[] = [];\n\n    constructor (id: string, x: number, y: number) {\n        this.id = id;\n        this.x = x;\n        this.y = y;\n    }\n\n    public createNodeElement(onMouseDown: (link: LinkNode, e: MouseEvent) => void) {\n        this.nodeElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n        this.nodeElement.classList.add('link-node');\n        this.nodeElement.setAttribute(\"cx\", `${this.x}`);\n        this.nodeElement.setAttribute(\"cy\", `${this.y}`);\n        this.nodeElement.addEventListener('mousedown', (e: MouseEvent) => onMouseDown(this, e));\n        if (this.isSelected) {\n            this.nodeElement.classList.add('selected');\n        }\n        if (this.isHighlighted) {\n            this.nodeElement.classList.add('highlighted');\n        }\n        this.moveCallbacks.forEach(callback => callback(this.x, this.y));\n    }\n\n    public moveTo(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n        if (this.nodeElement) {\n            this.nodeElement.setAttribute(\"cx\", `${this.x}`);\n            this.nodeElement.setAttribute(\"cy\", `${this.y}`);\n        }\n        this.moveCallbacks.forEach(callback => callback(this.x, this.y));\n    }\n\n    public addCallback(callback: (x: number, y: number) => void) {\n        this.moveCallbacks.push(callback);\n    }\n\n    public select() {\n        this.isSelected = true;\n        if (this.nodeElement) {\n            this.nodeElement.classList.add('selected');\n        }\n    }\n\n    public unselect() {\n        this.isSelected = false;\n        if (this.nodeElement) {\n            this.nodeElement.classList.remove('selected');\n        }\n    }\n    public toggleSelect() {\n        if (this.isSelected) {\n            this.unselect();\n        } else {\n            this.select();\n        }\n    }\n\n    public highlight(): void {\n        this.isHighlighted = true;\n        if (this.nodeElement) {\n            this.nodeElement.classList.add('highlighted');\n        }\n    }\n    \n    public unhighlight(): void {\n        this.isHighlighted = false;\n        if (this.nodeElement) {\n            this.nodeElement.classList.remove('highlighted');\n        }\n    }\n}\n\nexport class SourceNode extends LinkNode {\n    connectedPort: undefined | { block: Block, index: number };\n\n    constructor(xOrBlock: number | Block, yOrIndex: number) {\n        if (typeof xOrBlock === 'number' && typeof yOrIndex === 'number') {\n            super(String(xOrBlock) + String(yOrIndex), xOrBlock, yOrIndex);\n        } else if (xOrBlock instanceof Block && typeof yOrIndex === 'number') {\n            const connectedPort = { block: xOrBlock, index: yOrIndex };\n            const position = connectedPort.block.getPortPosition(connectedPort.index, \"output\");\n            super(connectedPort.block.id + yOrIndex, position.x, position.y);\n            this.connectedPort = connectedPort;\n        } else {\n            throw new Error(\"Invalid arguments provided to SourceNode constructor\");\n        }\n    }\n\n    public createNodeElement(onMouseDown: (link: LinkNode, e: MouseEvent) => void): void {\n        super.createNodeElement(onMouseDown);\n        if (this.nodeElement) {\n            this.nodeElement.classList.add('source-node');\n        }\n    }\n\n    public moveTo(x: number, y: number): void {\n        if (this.connectedPort) {\n            this.connectedPort = undefined;\n        }\n        super.moveTo(x, y);\n    }\n\n    public attachToPort(block: Block, index: number) {\n        this.connectedPort = { block: block, index: index };\n        this.moveToAttachedPort();\n    }\n\n    public moveToAttachedPort() {\n        const position = this.connectedPort?.block.getPortPosition(this.connectedPort.index, \"output\");\n        if (position) {\n            super.moveTo(position.x, position.y);\n        }\n    }\n}\n\nexport class TargetNode extends LinkNode {\n    connectedPort: undefined | { block: Block, index: number };\n\n    constructor(xOrBlock: number | Block, yOrIndex: number) {\n        if (typeof xOrBlock === 'number' && typeof yOrIndex === 'number') {\n            super(String(xOrBlock) + String(yOrIndex), xOrBlock, yOrIndex);\n        } else if (xOrBlock instanceof Block && typeof yOrIndex === 'number') {\n            const connectedPort = { block: xOrBlock, index: yOrIndex };\n            const position = connectedPort.block.getPortPosition(connectedPort.index, \"input\");\n            super(connectedPort.block.id + yOrIndex, position.x, position.y);\n            this.connectedPort = connectedPort;\n        } else {\n            throw new Error(\"Invalid arguments provided to SourceNode constructor\");\n        }\n    }\n\n    public createNodeElement(onMouseDown: (link: LinkNode, e: MouseEvent) => void): void {\n        super.createNodeElement(onMouseDown);\n        if (this.nodeElement) {\n            this.nodeElement.classList.add('target-node');\n        }\n    }\n\n    public moveTo(x: number, y: number): void {\n        if (this.connectedPort) {\n            this.connectedPort = undefined;\n        }\n        super.moveTo(x, y);\n    }\n\n    public attachToPort(block: Block, index: number) {\n        this.connectedPort = { block: block, index: index };\n        this.moveToAttachedPort();\n    }\n\n    public moveToAttachedPort() {\n        const position = this.connectedPort?.block.getPortPosition(this.connectedPort.index, \"input\");\n        if (position) {\n            super.moveTo(position.x, position.y);\n        }\n    }\n}\n\nexport class LinkSegment {\n    sourceLinkNode: LinkNode;\n    targetLinkNode: LinkNode;\n    segmentElement: SVGPolylineElement | undefined;\n    isSelected: boolean = false;\n\n    constructor (sourceLinkNode: LinkNode, targetLinkNode: LinkNode) {\n        this.sourceLinkNode = sourceLinkNode;\n        this.sourceLinkNode.addCallback(this.updateSourceLinkNodePosition);\n        this.targetLinkNode = targetLinkNode;\n        this.targetLinkNode.addCallback(this.updateTargetLinkNodePosition);\n        console.log(`link created: ${this.sourceLinkNode.x}`);\n    }\n\n    public createSegmentElement(onMouseDown: (link: LinkSegment, e: MouseEvent) => void) {\n        console.log(`segment element created: ${this.sourceLinkNode.x}`);\n\n        this.segmentElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"polyline\");\n        this.segmentElement.classList.add('link-line');\n        if (this.isSelected) {\n            this.segmentElement.classList.add('selected');\n        }\n        this.segmentElement.addEventListener('mousedown', (e: MouseEvent) => onMouseDown(this, e));\n        this.updatePosition();\n    }\n\n    public updatePosition() { \n        const segmentPoints = [\n            {x: this.sourceLinkNode.x, y: this.sourceLinkNode.y},\n            {x: this.targetLinkNode.x, y: this.targetLinkNode.y}\n        ];\n        const pointsString = segmentPoints.map(p => `${p.x},${p.y}`).join(\" \");\n        this.segmentElement?.setAttribute(\"points\", pointsString);\n    }\n\n    private updateSourceLinkNodePosition = (x: number, y: number) : void => {\n        this.updatePosition();\n    };\n\n    private updateTargetLinkNodePosition = (x: number, y: number) : void => {\n        this.updatePosition();\n    };\n\n    public select() {\n        this.isSelected = true;\n        if (this.segmentElement) {\n            this.segmentElement.classList.add('selected');\n        }\n    }\n    public unselect() {\n        console.log(\"unselected\");\n        this.isSelected = false;\n        if (this.segmentElement) {\n            this.segmentElement.classList.remove('selected');\n        }\n    }\n\n    public toggleSelect() {\n        if (this.isSelected) {\n            this.unselect();\n        } else {\n            this.select();\n        }\n    }\n}\n\nexport class Link {\n    sourceNode: SourceNode;\n    targetNode: TargetNode;\n    intermediateNodes: LinkNode[] = [];\n    segments: LinkSegment[] = [];\n    id: string;\n\n    private onMouseDownSegment: (link: LinkSegment, e: MouseEvent) => void;\n    private onMouseDownNode: (link: LinkNode, e: MouseEvent) => void;\n\n    constructor(\n        id: string,\n        sourceNode: SourceNode,\n        targetNode: TargetNode,\n        intermediateNodes: LinkNode[] = [],\n        onMouseDownSegment: (link: LinkSegment, e: MouseEvent) => void,\n        onMouseDownNode: (link: LinkNode, e: MouseEvent) => void\n    ) {\n        this.id = id;\n        this.sourceNode = sourceNode;\n        this.targetNode = targetNode;\n        this.intermediateNodes = intermediateNodes;\n        this.onMouseDownSegment = onMouseDownSegment;\n        this.onMouseDownNode = onMouseDownNode;\n    }\n\n    public updateSegments() {\n        let newSegments: LinkSegment[] = [];\n        if (this.intermediateNodes.length === 0) {\n            let existingSegment = this.segments.find(segment => segment.sourceLinkNode === this.sourceNode && segment.targetLinkNode === this.targetNode);\n            if (existingSegment) {\n                newSegments = [existingSegment];\n            } else {\n                newSegments = [new LinkSegment(this.sourceNode, this.targetNode)];\n            }\n        } else {\n            let existingSegment = this.segments.find(segment => segment.sourceLinkNode === this.sourceNode && segment.targetLinkNode === this.intermediateNodes[0]);\n            if (existingSegment) {\n                newSegments = [existingSegment];\n            } else {\n                newSegments = [new LinkSegment(this.sourceNode, this.intermediateNodes[0])];\n            }\n            for (let i: number = 0; i < this.intermediateNodes.length - 1; i++) {\n                existingSegment = this.segments.find(segment => segment.sourceLinkNode === this.intermediateNodes[i] && segment.targetLinkNode === this.intermediateNodes[i + 1]);\n                if (existingSegment) {\n                    newSegments.push(existingSegment);\n                } else {\n                    newSegments.push(new LinkSegment(this.intermediateNodes[i], this.intermediateNodes[i + 1]));\n                }\n            }\n            existingSegment = this.segments.find(segment => segment.sourceLinkNode === this.intermediateNodes[this.intermediateNodes.length - 1] && segment.targetLinkNode === this.targetNode);\n            if (existingSegment) {\n                newSegments.push(existingSegment);\n            } else {\n                newSegments.push(new LinkSegment(this.intermediateNodes[this.intermediateNodes.length - 1], this.targetNode));\n            }\n        }\n        this.segments = newSegments;\n        this.segments.forEach(segment => segment.updatePosition());\n    }\n\n    public updatePosition(): void {\n        this.sourceNode.moveToAttachedPort();\n        this.targetNode.moveToAttachedPort();\n        \n        this.segments.forEach(segment => segment.updatePosition());\n    }\n\n    public addToSvg(svg: SVGSVGElement): void {\n        this.updateSegments();\n        this.segments.forEach(segment => {\n            segment.createSegmentElement(this.onMouseDownSegment);\n            console.log(`Total segment amount: ${this.segments.length}`);\n            if (segment.segmentElement) {\n                svg.appendChild(segment.segmentElement);\n            }\n            else\n            {\n                throw RangeError(\"Segment element should not be null\");\n            }\n        });\n\n        this.intermediateNodes.forEach(node => {\n            node.createNodeElement(this.onMouseDownNode);\n            if (node.nodeElement) {\n                svg.appendChild(node.nodeElement);\n            }\n        });\n\n        this.sourceNode.createNodeElement(this.onMouseDownNode);\n        if (this.sourceNode.nodeElement) {\n            svg.appendChild(this.sourceNode.nodeElement);\n        }\n        this.targetNode.createNodeElement(this.onMouseDownNode);\n        if (this.targetNode.nodeElement) {\n            svg.appendChild(this.targetNode.nodeElement);\n        }\n    }\n\n    removeFromSvg(svg: SVGSVGElement): void {\n        this.segments.forEach(segment => {\n            if (segment.segmentElement) {\n                svg.removeChild(segment.segmentElement);\n            }\n        });\n\n        this.intermediateNodes.forEach(node => {\n            if (node.nodeElement) {\n                svg.removeChild(node.nodeElement);\n            }\n        });\n\n        if (this.sourceNode.nodeElement) {\n            svg.removeChild(this.sourceNode.nodeElement);\n        }\n        if (this.targetNode.nodeElement) {\n            svg.removeChild(this.targetNode.nodeElement);\n        }\n    }\n\n\n    public select() {\n        this.segments.forEach(segment => segment.select());\n        this.intermediateNodes.forEach(node => node.select());\n        this.sourceNode.select();\n        this.targetNode.select();\n\n    }\n\n    public unselect(): void {\n        this.segments.forEach(segment => segment.unselect());\n        this.intermediateNodes.forEach(node => node.unselect());\n        this.sourceNode.unselect();\n        this.targetNode.unselect();\n    }\n\n    public getState(): { type: string; id: string; sourceId: string; sourcePort: number; targetId: string; targetPort: number; nodeIndex: number, nodeId: string; x: number, y: number }[] {\n        var result: { type: string; id: string; sourceId: string; sourcePort: number; targetId: string; targetPort: number; nodeIndex: number; nodeId: string; x: number; y: number; }[] = [];\n        let sourcePort = this.sourceNode.connectedPort;\n        let targetPort = this.targetNode.connectedPort;\n\n        this.intermediateNodes.forEach((node, index) => {\n            result.push({\n                type: 'moveLinkNode',\n                id: this.id,\n                sourceId: sourcePort? sourcePort.block.id : 'undefined',\n                sourcePort: sourcePort? sourcePort.index : -1,\n                targetId: targetPort? targetPort.block.id : 'undefined',\n                targetPort: targetPort? targetPort.index : -1,\n                nodeIndex: index,\n                nodeId: node.id,\n                x: node.x,\n                y: node.y\n            });\n        });\n\n        result.push({type: 'moveLinkNode', \n            id: this.id,\n            sourceId: sourcePort? sourcePort.block.id : 'undefined',\n            sourcePort: sourcePort? sourcePort.index : -1,\n            targetId: targetPort? targetPort.block.id : 'undefined',\n            targetPort: targetPort? targetPort.index : -1,\n            nodeIndex: -1, // -1 for sourceNode\n            nodeId: this.sourceNode.id,\n            x: this.sourceNode.x,\n            y: this.sourceNode.y\n         });\n        \n        result.push({type: 'moveLinkNode', \n            id: this.id,\n            sourceId: sourcePort? sourcePort.block.id : 'undefined',\n            sourcePort: sourcePort? sourcePort.index : -1,\n            targetId: targetPort? targetPort.block.id : 'undefined',\n            targetPort: targetPort? targetPort.index : -1,\n            nodeIndex: -2, // -2 for targetNode\n            nodeId: this.targetNode.id,\n            x: this.targetNode.x,\n            y: this.targetNode.y\n         });\n\n        return result;\n    }\n}\n","import { link } from 'fs';\nimport { BlockInteractionManager } from './BlockInteractionManager';\nimport { Link, LinkNode, LinkSegment, SourceNode, TargetNode } from './Link';\nimport { Block } from './Block';\n\nexport class LinkInteractionManager {\n    public links: Link[] = [];\n    public linksSvg: SVGSVGElement;\n\n    private canvas: HTMLElement;\n    private vscode: any;\n\n    private dragStartX: number = 0;\n    private dragStartY: number = 0;\n    private isDragging: boolean = false;\n    private dragThreshold: number = 5;\n\n    private getZoomLevelReal: () => number;\n\n    private blockInteractionManager: BlockInteractionManager;\n\n    constructor (vscode: any, canvas: HTMLElement, linksSvg: SVGSVGElement, getZoomLevelReal: () => number, blockInteractionManager: BlockInteractionManager) {\n        this.vscode = vscode;\n        this.canvas = canvas;\n        this.linksSvg = linksSvg;\n        this.getZoomLevelReal = getZoomLevelReal;\n        this.blockInteractionManager = blockInteractionManager;\n    }\n\n    public createLink(sourceNode: SourceNode, targetNode: TargetNode, intermediateNodes: LinkNode[] = []): void {\n        let intermediateNodesData: {x: number, y: number}[] = [];\n        intermediateNodes.forEach(node => intermediateNodesData.push({x: node.x, y: node.y}));\n        this.vscode.postMessage({ type: 'addLink', \n                                    sourceId: sourceNode.connectedPort?.block.id, \n                                    sourcePort: sourceNode.connectedPort?.index, \n                                    targetId: targetNode.connectedPort?.block.id, \n                                    targetPort: targetNode.connectedPort?.index, \n                                    intermediateNodes: intermediateNodesData});\n    }\n    \n    public updateLinks = (): void => {\n        this.linksSvg = document.querySelector('.links') as SVGSVGElement;\n        if (!this.linksSvg) {\n            this.linksSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n            this.linksSvg.classList.add('links');\n        }\n\n        while (this.linksSvg.firstChild) {\n            this.linksSvg.removeChild(this.linksSvg.firstChild);\n        }\n\n        this.linksSvg.style.width = `${this.canvas.offsetWidth}px`;\n        this.linksSvg.style.height = `${this.canvas.offsetHeight}px`;\n        this.linksSvg.style.transform = this.canvas.style.transform; // Match the canvas transform (e.g., scale)\n\n\n        this.links.forEach(link => link.addToSvg(this.linksSvg));\n        this.links.forEach(link => link.updatePosition());\n        this.canvas.appendChild(this.linksSvg);\n    };\n\n    public unselectAll(): void {\n        this.links.forEach(link => link.unselect());\n    }\n\n    public getSelectedLinkSegments(): LinkSegment[] {\n        var result: LinkSegment[] = [];\n        this.links.forEach(link => {\n            link.segments.forEach(segment => {\n                if (segment.isSelected) {\n                    result.push(segment);\n                }\n            });\n        });\n        return result;\n    }\n\n    public getSelectedLinkNodes(): LinkNode[] {\n        var result: LinkNode[] = [];\n        this.links.forEach(link => {\n            link.intermediateNodes.forEach(node => {\n                if (node.isSelected) {\n                    result.push(node);\n                }\n            });\n            if (link.sourceNode.isSelected) {result.push(link.sourceNode);}\n            if (link.targetNode.isSelected) {result.push(link.targetNode);}\n        });\n        return result;\n    }\n\n\n    public getSelectedLinks(): Link[] {\n        var result: Link[] = [];\n        this.links.forEach(link => {\n            for (let segment of link.segments) {\n                if (segment.isSelected) {\n                    result.push(link);\n                    break;\n                }\n            }\n        });\n        return result;\n    }\n\n    public deleteLink(link: Link): void {\n        link.removeFromSvg(this.linksSvg);\n        const index = this.links.indexOf(link);\n        if (index !== -1) {\n            this.links.splice(index, 1);\n        }\n    }\n\n    public renderLinks(\n            linksData: { id: string, sourceId: string; sourcePort: number; targetId: string; targetPort: number; \n                sourceX: number; sourceY: number; targetX: number; targetY: number; intermediateNodes: { id: string; x: number; y: number }[] }[]): SVGSVGElement {\n        \n        this.vscode.postMessage({ type: 'print', text: `Render links` });\n\n        this.linksSvg = document.querySelector('.links') as SVGSVGElement;\n        if (!this.linksSvg) {\n            this.linksSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n            this.linksSvg.classList.add('links');\n        }\n\n        while (this.linksSvg.firstChild) {\n            this.linksSvg.removeChild(this.linksSvg.firstChild);\n        }\n\n    \n        // Create and render new links\n        linksData.forEach(linkData => {\n            let currentLink = this.links.find(link => link.id === linkData.id);\n            if (currentLink) {\n                currentLink.intermediateNodes.forEach((node, index) => {\n                    node.x = linkData.intermediateNodes[index].x;\n                    node.y = linkData.intermediateNodes[index].y;\n                });\n            } else {\n                this.vscode.postMessage({ type: 'print', text: `Link ID does not exist, creating link: ${linkData.id}` });\n                let sourceNode;\n                let targetNode;\n                if (linkData.sourceId !== 'undefined') {\n                    let sourceBlock = this.blockInteractionManager.blocks.find(block => block.id === linkData.sourceId);\n                    if (!sourceBlock) {\n                        throw RangeError(`Source block of id: ${linkData.sourceId} not found`);\n                    }\n                    sourceNode = new SourceNode(sourceBlock, linkData.sourcePort);\n                } else {\n                    sourceNode = new SourceNode(linkData.sourceX, linkData.sourceY);\n                }\n\n                if (linkData.targetId !== 'undefined') {\n                    let targetBlock = this.blockInteractionManager.blocks.find(block => block.id === linkData.targetId);\n                    if (!targetBlock) {\n                        throw RangeError(`Target block of id: ${linkData.targetId} not found`);\n                    }\n                    targetNode = new TargetNode(targetBlock, linkData.targetPort);\n                } else {\n                    targetNode = new TargetNode(linkData.targetX, linkData.targetY);\n                }\n\n                let intermediateNodes: LinkNode[] = [];\n                linkData.intermediateNodes.forEach(intermediateData => {\n                    intermediateNodes.push(new LinkNode(intermediateData.id, intermediateData.x, intermediateData.y));\n                });\n\n                currentLink = new Link(\n                    linkData.id,\n                    sourceNode,\n                    targetNode,\n                    intermediateNodes,\n                    this.onMouseDownSegment,\n                    this.onMouseDownNode\n                );\n\n                this.links.push(currentLink);\n            }\n            currentLink.addToSvg(this.linksSvg);\n            currentLink.updatePosition();\n            console.log(`Total links: ${this.links.length}`); \n        });\n\n        return this.linksSvg;\n    }\n\n\n    public onMouseDownSegment = (linkSegment: LinkSegment, e: MouseEvent): void => {\n        this.vscode.postMessage({ type: 'print', text: 'Link mouse down'});\n        if (e.button !== 1) {\n            this.vscode.postMessage({ type: 'print', text: `Mouse down on link segment: ${linkSegment.sourceLinkNode.x}` });\n            if (!linkSegment.isSelected) {\n                if (e.shiftKey) {\n                    // Toggle selection if Shift is pressed\n                    linkSegment.toggleSelect();\n                } else {\n                    // Clear selection and select only this block\n                    this.unselectAll();\n                    linkSegment.select();\n                }\n            }\n\n            // Store the initial mouse position\n            this.dragStartX = e.clientX;\n            this.dragStartY = e.clientY;\n            this.isDragging = false; // Reset dragging state\n        \n            // Add a temporary mousemove listener to detect drag threshold\n            const onMouseMoveThreshold = (moveEvent: MouseEvent) => {\n                const deltaX = Math.abs(moveEvent.clientX - this.dragStartX);\n                const deltaY = Math.abs(moveEvent.clientY - this.dragStartY);\n        \n                if (deltaX > this.dragThreshold || deltaY > this.dragThreshold) {\n                    // Exceeded drag threshold, start dragging\n                    this.isDragging = true;\n                    this.vscode.postMessage({ type: 'print', text: `Mouse drag start: ${linkSegment.sourceLinkNode.x}` });\n                    document.removeEventListener('mousemove', onMouseMoveThreshold);\n                    document.removeEventListener('mouseup', onMouseUpThreshold);\n\n                    // Start dragging selected blocks\n                    if (!linkSegment.isSelected) {\n                        // If the block is not already selected, add it to the selection\n                        linkSegment.select();\n                    }\n                    document.addEventListener('mousemove', this.onMouseMove);\n                    document.addEventListener('mouseup', this.onMouseUp);\n                }\n            };\n        \n            document.addEventListener('mousemove', onMouseMoveThreshold);\n        \n            // Handle mouseup to detect a simple click\n            const onMouseUpThreshold = () => {\n                document.removeEventListener('mousemove', onMouseMoveThreshold);\n                document.removeEventListener('mouseup', onMouseUpThreshold);\n        \n                if (!this.isDragging) {\n                    this.vscode.postMessage({ type: 'print', text: `As simple click on link segment: ${linkSegment.sourceLinkNode.x}` });\n\n                    // If no drag occurred, treat it as a simple click\n                    if (e.shiftKey) {\n                        // Toggle selection if Shift is pressed\n                        linkSegment.toggleSelect();\n                    } else {\n                        // Clear selection and select only this block\n                        this.unselectAll();\n                        linkSegment.select();\n                    }\n                }\n            };\n        \n            document.addEventListener('mouseup', onMouseUpThreshold);\n        }\n    };\n    \n    public onMouseDownNode = (linkNode: LinkNode, e: MouseEvent): void => {\n        this.vscode.postMessage({ type: 'print', text: 'Link mouse down'});\n        if (e.button !== 1) {\n            this.vscode.postMessage({ type: 'print', text: `Mouse down on link segment: ${linkNode.id}` });\n            if (!linkNode.isSelected) {\n                if (e.shiftKey) {\n                    // Toggle selection if Shift is pressed\n                    linkNode.toggleSelect();\n                } else {\n                    // Clear selection and select only this block\n                    this.unselectAll();\n                    linkNode.select();\n                }\n            }\n\n            // Store the initial mouse position\n            this.dragStartX = e.clientX;\n            this.dragStartY = e.clientY;\n            this.isDragging = false; // Reset dragging state\n        \n            // Add a temporary mousemove listener to detect drag threshold\n            const onMouseMoveThreshold = (moveEvent: MouseEvent) => {\n                const deltaX = Math.abs(moveEvent.clientX - this.dragStartX);\n                const deltaY = Math.abs(moveEvent.clientY - this.dragStartY);\n        \n                if (deltaX > this.dragThreshold || deltaY > this.dragThreshold) {\n                    // Exceeded drag threshold, start dragging\n                    this.isDragging = true;\n                    this.vscode.postMessage({ type: 'print', text: `Mouse drag start: ${linkNode.id}` });\n                    document.removeEventListener('mousemove', onMouseMoveThreshold);\n                    document.removeEventListener('mouseup', onMouseUpThreshold);\n\n                    // Start dragging selected blocks\n                    if (!linkNode.isSelected) {\n                        // If the block is not already selected, add it to the selection\n                        linkNode.select();\n                    }\n                    document.addEventListener('mousemove', this.onMouseMove);\n                    document.addEventListener('mouseup', this.onMouseUp);\n                }\n            };\n        \n            document.addEventListener('mousemove', onMouseMoveThreshold);\n        \n            // Handle mouseup to detect a simple click\n            const onMouseUpThreshold = () => {\n                document.removeEventListener('mousemove', onMouseMoveThreshold);\n                document.removeEventListener('mouseup', onMouseUpThreshold);\n        \n                if (!this.isDragging) {\n                    this.vscode.postMessage({ type: 'print', text: `As simple click on link segment: ${linkNode.id}` });\n\n                    // If no drag occurred, treat it as a simple click\n                    if (e.shiftKey) {\n                        // Toggle selection if Shift is pressed\n                        linkNode.toggleSelect();\n                    } else {\n                        // Clear selection and select only this block\n                        this.unselectAll();\n                        linkNode.select();\n                    }\n                }\n            };\n        \n            document.addEventListener('mouseup', onMouseUpThreshold);\n        }\n    };\n    \n    public onMouseUp = (): void => {\n        this.vscode.postMessage({ type: 'print', text: `Mouse up links` });\n\n        if (this.isDragging) {\n            this.isDragging = false;\n\n            let nodesToMove = new Set<LinkNode>();\n\n            this.getSelectedLinkSegments().forEach(linkSegment => {\n                nodesToMove.add(linkSegment.sourceLinkNode);\n                nodesToMove.add(linkSegment.targetLinkNode);\n            });\n\n            this.getSelectedLinkNodes().forEach(node => nodesToMove.add(node));\n\n            nodesToMove.forEach(node => {\n                const port = this.detectPort(node);\n                if (port) {\n                    node.unhighlight();\n                    if (port.portType === \"input\" && node instanceof TargetNode) {\n                        node.attachToPort(port.block, port.portIndex);\n                    } else if (port.portType === \"output\" && node instanceof SourceNode) {\n                        node.attachToPort(port.block, port.portIndex);\n                    }\n                } else {\n                    node.unhighlight();\n                }\n            });\n            \n            const stateMessages = this.links.flatMap(link => link.getState());\n            \n            this.vscode.postMessage({ type: 'moveLinkBatch', updates: stateMessages });\n\n        }\n\n        document.removeEventListener('mousemove', this.onMouseMove);\n        document.removeEventListener('mouseup', this.onMouseUp);\n    };\n    \n    public onMouseMove = (e: MouseEvent): void => {\n        const scaledDeltaX = (e.clientX - this.dragStartX) / this.getZoomLevelReal();\n        const scaledDeltaY = (e.clientY - this.dragStartY) / this.getZoomLevelReal();\n        \n        this.vscode.postMessage({ type: 'print', text: `Move links x: ${scaledDeltaX} y: ${scaledDeltaY}`});\n        if (this.isDragging) {\n            let nodesToMove = new Set<LinkNode>();\n\n            this.getSelectedLinkSegments().forEach(linkSegment => {\n                nodesToMove.add(linkSegment.sourceLinkNode);\n                nodesToMove.add(linkSegment.targetLinkNode);\n            });\n\n            this.getSelectedLinkNodes().forEach(node => nodesToMove.add(node));\n\n            nodesToMove.forEach(node => {\n                node.moveTo(node.x + scaledDeltaX, node.y + scaledDeltaY);\n    \n                // Detect if the node is over a port\n                const port = this.detectPort(node);\n                \n                if (port) {\n                    if (port.portType === \"input\" && node instanceof TargetNode) {\n                        node.highlight();\n                    } else if (port.portType === \"output\" && node instanceof SourceNode) {\n                        node.highlight();\n                    } else {\n                        node.unhighlight();\n                    }\n                } else {\n                    node.unhighlight();\n                }\n            });\n\n            this.dragStartX = e.clientX;\n            this.dragStartY = e.clientY;\n        }  \n        this.updateLinks();  \n    };  \n    \n    private detectPort(node: LinkNode): { block: Block; portIndex: number; portType: \"input\" | \"output\" } | null {\n        for (const block of this.blockInteractionManager.blocks) {\n            for (let i = 0; i < block.inputPorts; i++) {\n                const portPosition = block.getPortPosition(i, \"input\");\n                if (Math.abs(node.x - portPosition.x) < 10 && Math.abs(node.y - portPosition.y) < 10) {\n                    return { block, portIndex: i, portType: \"input\" };\n                }\n            }\n            for (let i = 0; i < block.outputPorts; i++) {\n                const portPosition = block.getPortPosition(i, \"output\");\n                if (Math.abs(node.x - portPosition.x) < 10 && Math.abs(node.y - portPosition.y) < 10) {\n                    return { block, portIndex: i, portType: \"output\" };\n                }\n            }\n        }\n        return null;\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Link, SourceNode, TargetNode } from './Link';\r\nimport { Block } from './Block';\r\nimport { BlockInteractionManager } from './BlockInteractionManager';\r\nimport { LinkInteractionManager } from './LinkInteractionManager';\r\n\r\n\r\ndeclare const acquireVsCodeApi: () => any;\r\nconst vscode = acquireVsCodeApi();\r\n\r\n\r\n(function () {\r\n    const canvas = document.querySelector('.canvas') as HTMLElement;\r\n    const zoomContainer = document.querySelector('.zoom-container') as HTMLElement;\r\n    const topControls = document.querySelector('.top-controls') as HTMLElement;\r\n    const canvasContainer = document.querySelector('.canvas-container') as HTMLElement;\r\n\r\n\r\n    let dragStartX = 0;\r\n    let dragStartY = 0;\r\n\r\n\r\n    let selectionBox: HTMLElement | null = null;\r\n\r\n    let zoomLevel = 2; // Default zoom level\r\n    const zoomStep = 0.1; // Step for zooming in/out\r\n    const minZoom = 1; // Minimum zoom level\r\n    const maxZoom = 4; // Maximum zoom level\r\n\r\n\r\n    let isPanning = false;\r\n    let panStartX = 0;\r\n    let panStartY = 0;\r\n\r\n    let canvasHeigh = 4000;\r\n    let canvasWidth = 8000;\r\n\r\n    let linkInteractionManager: LinkInteractionManager;\r\n    let blockInteractionManager: BlockInteractionManager;\r\n\r\n    blockInteractionManager = new BlockInteractionManager(vscode, getZoomLevelReal, () => linkInteractionManager.updateLinks());\r\n    linkInteractionManager = new LinkInteractionManager(vscode, canvas, document.querySelector('.links') as SVGSVGElement, getZoomLevelReal, blockInteractionManager);\r\n\r\n    function getZoomLevelReal(): number {\r\n        return zoomLevel/2;\r\n    }\r\n\r\n    \r\n\r\n    function onMouseDownInCanvas(e: MouseEvent): void {\r\n        vscode.postMessage({ type: 'print', text: 'mouse down in canvas'});\r\n        vscode.postMessage({ type: 'print', text: `e button ${e.button}`});\r\n        if (e.button !== 1) {\r\n            vscode.postMessage({ type: 'print', text: `e target ${e.target}`});\r\n            if (e.target !== canvas) {\r\n                return; // Ignore clicks on child elements\r\n            }\r\n            vscode.postMessage({ type: 'print', text: 'starting box selection'});\r\n            startBoxSelection(e);\r\n        }\r\n    }\r\n\r\n    function onMouseUp(): void {\r\n        vscode.postMessage({ type: 'print', text: `Mouse up` });\r\n\r\n        if (selectionBox) {\r\n            // End box selection\r\n            canvas.removeChild(selectionBox);\r\n            selectionBox = null;\r\n        }\r\n\r\n        document.removeEventListener('mousemove', onMouseMove);\r\n        document.removeEventListener('mouseup', onMouseUp);\r\n    }\r\n\r\n    function onMouseMove(e: MouseEvent): void {        \r\n        linkInteractionManager.updateLinks();\r\n\r\n        if (selectionBox) {\r\n            // Update selection box size\r\n            const canvasRect = canvas.getBoundingClientRect();\r\n\r\n            const adjustedX = (e.clientX - canvasRect.left) / getZoomLevelReal();\r\n            const adjustedY = (e.clientY - canvasRect.top) / getZoomLevelReal();\r\n\r\n            const scaledWidth = (adjustedX - dragStartX);\r\n            const scaledHeight = (adjustedY - dragStartY);\r\n\r\n            selectionBox.style.left = `${Math.min(dragStartX, adjustedX)}px`;\r\n            selectionBox.style.top = `${Math.min(dragStartY, adjustedY)}px`;\r\n            selectionBox.style.width = `${Math.abs(scaledWidth)}px`;\r\n            selectionBox.style.height = `${Math.abs(scaledHeight)}px`;\r\n    \r\n            // Update selected blocks based on the selection box\r\n            updateSelectionBox();\r\n        }\r\n    }\r\n\r\n\r\n    function startBoxSelection(e: MouseEvent): void {\r\n        blockInteractionManager.unselectAll();\r\n        linkInteractionManager.unselectAll();\r\n    \r\n        vscode.postMessage({ type: 'print', text: `Start box selection at ${e.clientX}, ${e.clientY}` });\r\n    \r\n        // Get the canvas's bounding rectangle\r\n        const canvasRect = canvas.getBoundingClientRect();\r\n    \r\n        // Adjust mouse coordinates to be relative to the canvas\r\n        const adjustedX = (e.clientX - canvasRect.left) / getZoomLevelReal();\r\n        const adjustedY = (e.clientY - canvasRect.top) / getZoomLevelReal();\r\n    \r\n        selectionBox = document.createElement('div');\r\n        selectionBox.className = 'selection-box';\r\n        canvas.appendChild(selectionBox);\r\n    \r\n        dragStartX = adjustedX;\r\n        dragStartY = adjustedY;\r\n    \r\n        selectionBox.style.left = `${dragStartX}px`;\r\n        selectionBox.style.top = `${dragStartY}px`;\r\n    \r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n    }\r\n\r\n    function updateSelectionBox(): void {\r\n        const boxRect = selectionBox!.getBoundingClientRect();\r\n\r\n        blockInteractionManager.blocks.forEach(block => {\r\n            const blockEl = block.getElement();\r\n            const blockRect = blockEl.getBoundingClientRect();\r\n\r\n            if (\r\n                blockRect.left < boxRect.right &&\r\n                blockRect.right > boxRect.left &&\r\n                blockRect.top < boxRect.bottom &&\r\n                blockRect.bottom > boxRect.top\r\n            ) {\r\n                block.select();\r\n            } else {\r\n                block.unselect();\r\n            }\r\n        });\r\n        \r\n        // linkInteractionManager.links.forEach(link => {\r\n        //     link.segments.forEach((segment, index) => {\r\n        //         const blockRect = link.getBoundingBox(index);\r\n\r\n        //         if (\r\n        //             blockRect.left < boxRect.right &&\r\n        //             blockRect.right > boxRect.left &&\r\n        //             blockRect.top < boxRect.bottom &&\r\n        //             blockRect.bottom > boxRect.top\r\n        //         ) {\r\n        //             link.select(index);\r\n        //         } else {\r\n        //             link.unselect(index);\r\n        //         }\r\n        //     });\r\n        // });\r\n    }\r\n\r\n    function createRandomLink(): void {\r\n        if (blockInteractionManager.blocks.length < 2) {\r\n            vscode.postMessage({ type: 'print', text: 'Not enough blocks to create a link.' });\r\n            return;\r\n        }\r\n    \r\n        // Randomly select two different blocks\r\n        const sourceIndex = Math.floor(Math.random() * blockInteractionManager.blocks.length);\r\n        let targetIndex = Math.floor(Math.random() * blockInteractionManager.blocks.length);\r\n    \r\n        // Ensure the source and target are not the same\r\n        while (targetIndex === sourceIndex) {\r\n            targetIndex = Math.floor(Math.random() * blockInteractionManager.blocks.length);\r\n        }\r\n    \r\n        const sourceBlock = blockInteractionManager.blocks[sourceIndex];\r\n        const targetBlock = blockInteractionManager.blocks[targetIndex];\r\n    \r\n        // Create a link between the two blocks\r\n        let sourceNode = new SourceNode(sourceBlock, 0);\r\n        let targetNode = new TargetNode(targetBlock, 0);\r\n        linkInteractionManager.createLink(sourceNode, targetNode, []);\r\n    \r\n        vscode.postMessage({ type: 'print', text: `Created link between ${sourceBlock.label} and ${targetBlock.label}` });\r\n    }\r\n\r\n    function renderHTML(json: {\r\n        blocks?: {\r\n            id: string;\r\n            label: string;\r\n            x: number;\r\n            y: number;\r\n            inputPorts: number;\r\n            outputPorts: number;\r\n        }[];\r\n        links?: {\r\n            id: string;\r\n            sourceId: string;\r\n            sourcePort: number;\r\n            targetId: string;\r\n            targetPort: number;\r\n            sourceX: number;\r\n            sourceY: number;\r\n            targetX: number;\r\n            targetY: number;\r\n            intermediateNodes: {\r\n                id: string\r\n                x: number;\r\n                y: number;\r\n            }[];\r\n        }[];\r\n    }): void {\r\n        vscode.postMessage({ type: 'print', text: `Render html` });\r\n        vscode.postMessage({ type: 'print', text: `Rendering ${blockInteractionManager.blocks.length} blocks` });\r\n        canvas.innerHTML = ''; // Clear canvas\r\n        blockInteractionManager.blocks.forEach(block => block.addElementToCanvas(canvas));\r\n\r\n        canvas.addEventListener('mousedown', onMouseDownInCanvas);\r\n\r\n        topControls.innerHTML = '';\r\n        // Add button\r\n        const btn = document.createElement('button');\r\n        btn.textContent = 'Add Block';\r\n        btn.addEventListener('click', () => vscode.postMessage({ type: 'addBlock' }));\r\n        topControls.appendChild(btn);\r\n\r\n        // Add button to create a link\r\n        const btnCreateLink = document.createElement('button');\r\n        btnCreateLink.textContent = 'Create Link';\r\n        btnCreateLink.addEventListener('click', createRandomLink);\r\n        topControls.appendChild(btnCreateLink);\r\n\r\n        const btnZoomIn = document.createElement('button');\r\n        btnZoomIn.textContent = 'Zoom In';\r\n        const btnZoomOut = document.createElement('button');\r\n        btnZoomOut.textContent = 'Zoom Out';\r\n        const btnResetZoom = document.createElement('button');\r\n        btnResetZoom.textContent = 'Reset Zoom';\r\n\r\n        btnZoomIn.addEventListener('click', () => setZoom(zoomLevel + zoomStep));\r\n        btnZoomOut.addEventListener('click', () => setZoom(zoomLevel - zoomStep));\r\n        btnResetZoom.addEventListener('click', () => setZoom(2));\r\n\r\n        topControls.appendChild(btnZoomIn);\r\n        topControls.appendChild(btnZoomOut);\r\n        topControls.appendChild(btnResetZoom);\r\n\r\n        zoomContainer.addEventListener('wheel', handleMouseWheelZoom);\r\n        canvasContainer.addEventListener('mousedown', onMouseDownForPanning);\r\n\r\n        \r\n\r\n        linkInteractionManager.updateLinks();\r\n\r\n        centerCanvas();\r\n\r\n        setZoom(zoomLevel);\r\n\r\n        let svgElement = linkInteractionManager.renderLinks((json.links || []).map(link => ({\r\n            id: link.id,\r\n            sourceId: link.sourceId,\r\n            targetId: link.targetId,\r\n            sourcePort: link.sourcePort, \r\n            targetPort: link.targetPort, \r\n            sourceX: link.sourceX,\r\n            sourceY: link.sourceY,\r\n            targetX: link.targetX,\r\n            targetY: link.targetY,\r\n            intermediateNodes: link.intermediateNodes \r\n        })));\r\n\r\n        canvasContainer.appendChild(svgElement);\r\n        linkInteractionManager.updateLinks();\r\n        \r\n\r\n    }\r\n\r\n    \r\n\r\n    function centerCanvas(): void {\r\n        // Scroll to the center of the canvas\r\n        // canvasContainer.scrollLeft = (canvas.scrollWidth - canvasContainer.clientWidth) / 2;\r\n        // canvasContainer.scrollTop = (canvas.scrollHeight - canvasContainer.clientHeight) / 2;\r\n    }\r\n\r\n    function updateWebView(jsonText: string): void {\r\n        vscode.postMessage({ type: 'print', text: `Update blocks` });\r\n        let json: { blocks?: { id: string; label: string; x: number; y: number; inputPorts: number; outputPorts: number}[]; \r\n                    links?: { id: string, sourceId: string; sourcePort: number; targetId: string; targetPort: number; \r\n                        sourceX: number; sourceY: number; targetX: number; targetY: number; intermediateNodes: { id: string; x: number; y: number }[] }[] };\r\n        try {\r\n            json = JSON.parse(jsonText || '{}');\r\n        } catch {\r\n            canvas.textContent = 'Invalid JSON';\r\n            return;\r\n        }\r\n\r\n        json.blocks?.forEach(blockData => {\r\n            blockInteractionManager.blocks.find(b => b.id === blockData.id)?.move(blockData.x, blockData.y);\r\n            var block = blockInteractionManager.blocks.find(b => b.id === blockData.id);\r\n            if (block) {\r\n                block.parseStateFromJson(blockData);\r\n            } else {\r\n                vscode.postMessage({ type: 'print', text: `Block ID does not exist, creating block: ${blockData.id}` });\r\n                blockInteractionManager.createBlock(blockData.id, blockData.label, blockData.x, blockData.y, blockData.inputPorts, blockData.outputPorts);\r\n            }\r\n        });\r\n\r\n\r\n        renderHTML(json);\r\n    }\r\n\r\n\r\n    function setZoom(level: number): void {\r\n    \r\n        // Clamp the zoom level between minZoom and maxZoom\r\n        zoomLevel = Math.min(maxZoom, Math.max(minZoom, level));\r\n        zoomContainer.style.transform = `scale(${zoomLevel})`;\r\n\r\n        // Dynamically adjust the canvas size based on the zoom level\r\n        const scaledWidth = Math.min(canvasWidth/2 * zoomLevel, canvasWidth/2); \r\n        const scaledHeight = Math.min(canvasHeigh/2 * zoomLevel, canvasHeigh/2);\r\n    \r\n        zoomContainer.style.width = `${scaledWidth}px`;\r\n        zoomContainer.style.height = `${scaledHeight}px`;\r\n\r\n        linkInteractionManager.updateLinks(); // Update the links to match the new zoom level\r\n        vscode.postMessage({ type: 'print', text: `Zoom level: ${zoomLevel}` });\r\n    }\r\n\r\n    function handleMouseWheelZoom(e: WheelEvent): void {\r\n        e.preventDefault(); // Prevent default scrolling behavior\r\n\r\n        // Adjust zoom level based on scroll direction\r\n        if (e.deltaY < 0) {\r\n            setZoom(zoomLevel + zoomStep); // Zoom in\r\n        } else if (e.deltaY > 0) {\r\n            setZoom(zoomLevel - zoomStep); // Zoom out\r\n        }\r\n    }\r\n\r\n    function onMouseDownForPanning(e: MouseEvent): void {\r\n        if (e.button === 1) { // Middle mouse button\r\n            e.preventDefault(); // Prevent default middle mouse behavior (e.g., auto-scroll)\r\n            isPanning = true;\r\n            canvasContainer.classList.add('panning'); // Add the class\r\n\r\n            // Store the initial mouse position\r\n            panStartX = e.clientX;\r\n            panStartY = e.clientY;\r\n    \r\n            // Add event listeners for mousemove and mouseup\r\n            document.addEventListener('mousemove', onMouseMoveForPanning);\r\n            document.addEventListener('mouseup', onMouseUpForPanning);\r\n        }\r\n    }\r\n\r\n    function onMouseMoveForPanning(e: MouseEvent): void {\r\n        if (!isPanning) { return; }\r\n    \r\n        // Calculate the distance moved\r\n        const deltaX = e.clientX - panStartX;\r\n        const deltaY = e.clientY - panStartY;\r\n    \r\n        // Adjust the scroll position of the canvasContainer\r\n        canvasContainer.scrollLeft -= deltaX;\r\n        canvasContainer.scrollTop -= deltaY;\r\n    \r\n        // Update the starting position for the next movement\r\n        panStartX = e.clientX;\r\n        panStartY = e.clientY;\r\n\r\n        linkInteractionManager.updateLinks();\r\n    }\r\n    \r\n    function onMouseUpForPanning(e: MouseEvent): void {\r\n        if (e.button === 1) { // Middle mouse button\r\n            isPanning = false;\r\n            canvasContainer.classList.remove('panning'); // Remove the class\r\n\r\n            // Remove the event listeners\r\n            document.removeEventListener('mousemove', onMouseMoveForPanning);\r\n            document.removeEventListener('mouseup', onMouseUpForPanning);\r\n        }\r\n    }\r\n\r\n\r\n    // Listen for messages from extension\r\n    window.addEventListener('message', (e: MessageEvent) => {\r\n        if (e.data.type === 'update') {\r\n            updateWebView(e.data.text);\r\n            vscode.setState({ text: e.data.text });\r\n        }\r\n    });\r\n\r\n    // Restore state if reloaded\r\n    const state = vscode.getState();\r\n    if (state) {\r\n        updateWebView(state.text);\r\n    }\r\n})();"],"names":[],"sourceRoot":""}